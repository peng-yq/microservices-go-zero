## 使用jmeter进行压力测试

> 简单做了一下压力测试，只测试了一个接口。
> 关于高性能，得辩证的去看待，脱离业务、机器和请求量，都是耍流氓。

### 测试环境

**测试工具**：`Apache-Jmeter 5.6.3`

**系统环境**

<img src="https://cdn.jsdelivr.net/gh/peng-yq/Gallery/202406051255703.png">

**系统负载**

<img src="https://cdn.jsdelivr.net/gh/peng-yq/Gallery/202406070007978.png">

### 测试配置

模拟`5s`内`1w`个用户请求民宿推荐页面。

<img src="https://cdn.jsdelivr.net/gh/peng-yq/Gallery/202406070009892.png">

<img src="https://cdn.jsdelivr.net/gh/peng-yq/Gallery/202406070010337.png">

<img src="https://cdn.jsdelivr.net/gh/peng-yq/Gallery/202406070011892.png">

### 测试结果

<img src="https://cdn.jsdelivr.net/gh/peng-yq/Gallery/202406070012739.png">

<img src="https://cdn.jsdelivr.net/gh/peng-yq/Gallery/202406070013690.png">

### 结果分析

#### 响应时间

- **样本数**: `10000`
- **平均响应时间**: `39 ms`
- **中位数（50%响应时间）**: `8 ms`
- **90%响应时间**: `134 ms`
- **95%响应时间**: `217 ms`
- **99%响应时间**: `351 ms`
- **最小响应时间**: `2 ms`
- **最大响应时间**: `1026 ms`

**分析**:
- 平均响应时间为`39 ms`，说明大部分请求的响应时间较快。
- 中位数响应时间为`8 ms`，意味着一半的请求响应时间低于`8 ms`。
- 90%和95%响应时间分别为`134 ms`和`217 ms`，说明绝大多数请求的响应时间在这个范围内。
- 99%的请求响应时间在`351 ms`以内，但最大响应时间达到了`1026 ms`，表明存在少量请求的响应时间较长，可能是由于服务器端的性能瓶颈（内存）。

#### 吞吐量

- **吞吐量**: `933.358 requests/sec`
- **接受KB/sec**: `257.949 KB/sec`
- **发送KB/sec**: `212.375 KB/sec`
- **每分钟吞吐量**: `56,001.493 requests/min`

**分析**:
- 吞吐量为`933.358 requests/sec`，表明系统每秒可以处理约`933`个请求。
- 每分钟吞吐量为`56,001.493 requests/min`，进一步验证了系统的高处理能力。
- 数据传输速率也较高，表明系统在处理请求时的网络性能良好。

#### 错误率

- **异常%**: `0.0%`

**分析**:
- 错误率为0%，说明在测试期间所有请求都成功，没有发生错误。这是一个非常好的指标，表明系统在高负载下仍然稳定。

#### TPS（Transactions Per Second）

- **TPS**: `933.358 transactions/sec`

**分析**:
- `TPS`与吞吐量一致，表明每秒处理的事务数为`933.358`。

#### QPS（Queries Per Second）

- **QPS**: `933.358 queries/sec`

**分析**:
- `QPS`同样与吞吐量一致，表明每秒处理的查询数为`933.358`。

### 总结

- **响应时间**: 整体响应时间较短，绝大多数请求的响应时间在合理范围内，但存在少量长响应时间的请求，大概率是因为系统硬件瓶颈。
- **吞吐量**: 系统具有很高的吞吐量，能够处理大量并发请求。
- **错误率**: 无错误请求，系统稳定性良好。
- **TPS/QPS**: 系统每秒处理的事务和查询数较高，性能表现出色。

